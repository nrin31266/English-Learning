server:
  port: 8888

spring:
  application:
    name: api-gateway

  cloud:
    gateway:
      globalcors:
        corsConfigurations:
          '[/**]':
            allowedOrigins:
              - "http://localhost:3000"
              - "http://localhost:3001"
            allowedMethods:
              - GET
              - POST
              - PUT
              - DELETE
              - OPTIONS
            allowedHeaders:
              - "*"
            allowCredentials: true
        add-to-simple-url-handler-mapping: true
      httpclient:
        websocket:
          max-frame-payload-length: 65536  # ğŸ‘ˆ TÄƒng kÃ­ch thÆ°á»›c khung tá»‘i Ä‘a náº¿u cáº§n
      routes:
        - id: notification-ws
          uri: lb:ws://notification-service   # ğŸ‘ˆ DÃ¹ng lb:ws:// thay vÃ¬ lb:http://
          predicates:
            - Path=/ws/**  # ğŸ‘ˆ hoáº·c /ws/** náº¿u báº¡n muá»‘n ngáº¯n hÆ¡n
          filters:
            - RemoveRequestHeader=Cookie # ğŸ‘ˆ XoÃ¡ header Cookie Ä‘á»ƒ trÃ¡nh váº¥n Ä‘á» vá»›i WebSocket
            - PreserveHostHeader # ğŸ‘ˆ Giá»¯ nguyÃªn header Host
        - id: user-service
          uri: lb://user-service
          predicates:
            - Path=/api/user-profiles/**
        - id: dictionary-service
          uri: lb://dictionary-service
          predicates:
            - Path=/api/dictionaries/**
        - id: learning-content-service
          uri: lb://learning-content-service
          predicates:
            - Path=/api/learning-contents/**
        - id: notification-service
          uri: lb://notification-service
          predicates:
            - Path=/api/notifications/**
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Origin Access-Control-Allow-Credentials Access-Control-Allow-Methods Access-Control-Allow-Headers

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/